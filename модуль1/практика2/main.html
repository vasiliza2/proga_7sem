<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест: Основы Веб-разработки</title>
    <style>
        :root {
            --primary: #6366f1;
            --success: #22c55e;
            --error: #ef4444;
            --bg: #f8fafc;
            --card: #ffffff;
            --text: #1e293b;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .quiz-container {
            background: var(--card);
            width: 100%;
            max-width: 600px;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            position: relative;
        }

        /* Индикаторы */
        .header-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .progress-container {
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        #progress-bar {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.4s ease;
        }

        /* Вопросы */
        .question-text {
            font-size: 1.25rem;
            margin-bottom: 20px;
        }

        .options-list {
            list-style: none;
            padding: 0;
        }

        .option-item {
            margin-bottom: 12px;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
        }

        .option-item:hover {
            border-color: var(--primary);
            background: #f5f3ff;
        }

        .option-item input {
            margin-right: 12px;
            width: 18px;
            height: 18px;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            box-sizing: border-box;
        }

        /* Кнопки */
        .controls {
            margin-top: 30px;
            display: flex;
            justify-content: space-between;
        }

        button {
            padding: 10px 24px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: 0.2s;
        }

        .btn-next { background: var(--primary); color: white; }
        .btn-next:hover { opacity: 0.9; transform: translateY(-1px); }
        .btn-next:disabled { background: #cbd5e1; cursor: not-allowed; }

        /* Результаты */
        .hidden { display: none; }
        
        .result-item {
            padding: 15px;
            margin-top: 10px;
            border-radius: 8px;
            border-left: 4px solid;
        }
        .res-correct { background: #dcfce7; border-color: var(--success); }
        .res-wrong { background: #fee2e2; border-color: var(--error); }

        @media (max-width: 480px) {
            .quiz-container { padding: 20px; }
            .question-text { font-size: 1.1rem; }
        }
    </style>
</head>
<body>

<div class="quiz-container">
    <div id="quiz-screen">
        <div class="header-info">
            <span id="question-number">Вопрос 1 из 10</span>
            <span id="timer">Время: 00:00</span>
        </div>
        <div class="progress-container">
            <div id="progress-bar"></div>
        </div>
        
        <div id="question-container">
            </div>
<div class="controls">
            <div></div> <button id="next-btn" class="btn-next">Далее</button>
        </div>
    </div>

    <div id="result-screen" class="hidden">
        <h2>Ваш результат</h2>
        <div id="score-text" style="font-size: 1.5rem; margin-bottom: 20px;"></div>
        <div id="review-container"></div>
        <button onclick="location.reload()" class="btn-next" style="margin-top: 20px; width: 100%;">Пройти заново</button>
    </div>
</div>

<script>
    const questions = [
        {
            question: "Какой тег используется для создания ссылки?",
            type: "single",
            options: ["&lt;link&gt;", "&lt;a&gt;", "&lt;href&gt;", "&lt;url&gt;"],
            correct: 1,
            points: 1
        },
        {
            question: "Выберите все логические операторы в JS:",
            type: "multiple",
            options: ["&&", "||", "==", "!"],
            correct: [0, 1, 3],
            points: 2
        },
        {
            question: "Как расшифровывается CSS?",
            type: "text",
            correct: "Cascading Style Sheets",
            points: 1
        },
        {
            question: "Какой метод превращает JSON-строку в объект?",
            type: "single",
            options: ["JSON.stringify()", "JSON.toObject()", "JSON.parse()", "JSON.convert()"],
            correct: 2,
            points: 1
        },
        {
            question: "Какие значения являются 'falsy' в JavaScript?",
            type: "multiple",
            options: ["0", "[]", "null", "undefined"],
            correct: [0, 2, 3],
            points: 2
        },
        {
            question: "Напишите название самого популярного менеджера пакетов для Node.js (3 буквы):",
            type: "text",
            correct: "npm",
            points: 1
        },
        {
            question: "Какое свойство CSS отвечает за внутренние отступы?",
            type: "single",
            options: ["margin", "border", "padding", "spacing"],
            correct: 2,
            points: 1
        },
        {
            question: "Выберите типы данных в JS:",
            type: "multiple",
            options: ["Boolean", "Float", "Symbol", "Number"],
            correct: [0, 2, 3],
            points: 2
        },
        {
            question: "Чему равно 2 + '2' в JavaScript?",
            type: "text",
            correct: "22",
            points: 1
        },
        {
            question: "В каком году появился JavaScript?",
            type: "single",
            options: ["1990", "1995", "2000", "2005"],
            correct: 1,
            points: 1
        }
    ];

    let currentIdx = 0;
    let score = 0;
    let userAnswers = [];
    let startTime;
    let timerInterval;

    const qContainer = document.getElementById('question-container');
    const nextBtn = document.getElementById('next-btn');
    const progressBar = document.getElementById('progress-bar');
    const qNumberLabel = document.getElementById('question-number');
    const timerLabel = document.getElementById('timer');

    function startTimer() {
        startTime = Date.now();
        timerInterval = setInterval(() => {
            const delta = Date.now() - startTime;
            const sec = Math.floor(delta / 1000) % 60;
            const min = Math.floor(delta / 60000);
            timerLabel.innerText = `Время: ${min.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`;
        }, 1000);
    }

    function renderQuestion() {
        const q = questions[currentIdx];
        qNumberLabel.innerText = `Вопрос ${currentIdx + 1} из ${questions.length}`;
        progressBar.style.width = `${((currentIdx) / questions.length) * 100}%`;
        
        let html = `<div class="question-text">${q.question}</div>`;

        if (q.type === 'single' || q.type === 'multiple') {
            html += `<div class="options-list">`;
            q.options.forEach((opt, i) => {
                const inputType = q.type === 'single' ? 'radio' : 'checkbox';
                html += `
<label class="option-item">
                        <input type="${inputType}" name="answer" value="${i}">
                        <span>${opt}</span>
                    </label>
                `;
            });
            html += `</div>`;
        } else {
            html += `<input type="text" id="text-answer" placeholder="Введите ваш ответ...">`;
        }

        qContainer.innerHTML = html;
    }

    nextBtn.onclick = () => {
        const q = questions[currentIdx];
        let answer;

        if (q.type === 'single') {
            const selected = document.querySelector('input[name="answer"]:checked');
            if (!selected) return alert("Выберите ответ!");
            answer = parseInt(selected.value);
        } else if (q.type === 'multiple') {
            const selected = Array.from(document.querySelectorAll('input[name="answer"]:checked')).map(el => parseInt(el.value));
            if (selected.length === 0) return alert("Выберите хотя бы один вариант!");
            answer = selected;
        } else {
            answer = document.getElementById('text-answer').value.trim();
            if (!answer) return alert("Введите ответ!");
        }

        userAnswers.push(answer);
        currentIdx++;

        if (currentIdx < questions.length) {
            renderQuestion();
        } else {
            showResults();
        }
    };

    function showResults() {
        clearInterval(timerInterval);
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');

        let totalPoints = 0;
        let earnedPoints = 0;
        let reviewHtml = '';

        questions.forEach((q, i) => {
            totalPoints += q.points;
            let isCorrect = false;
            const uAns = userAnswers[i];

            if (q.type === 'single') isCorrect = uAns === q.correct;
            else if (q.type === 'multiple') {
                isCorrect = JSON.stringify(uAns.sort()) === JSON.stringify(q.correct.sort());
            } else {
                isCorrect = uAns.toLowerCase() === q.correct.toLowerCase();
            }

            if (isCorrect) earnedPoints += q.points;

            reviewHtml += `
                <div class="result-item ${isCorrect ? 'res-correct' : 'res-wrong'}">
                    <strong>${i+1}. ${q.question}</strong><br>
                    Ваш ответ: ${q.type === 'text' ? uAns : (Array.isArray(uAns) ? uAns.map(idx => q.options[idx]).join(', ') : q.options[uAns])}<br>
                    ${!isCorrect ? `Правильный: ${q.type === 'text' ? q.correct : (Array.isArray(q.correct) ? q.correct.map(idx => q.options[idx]).join(', ') : q.options[q.correct])}` : 'Верно!'}
                </div>
            `;
        });

        const percent = Math.round((earnedPoints / totalPoints) * 100);
        document.getElementById('score-text').innerHTML = `Баллы: ${earnedPoints} / ${totalPoints} (${percent}%)`;
        document.getElementById('review-container').innerHTML = reviewHtml;
    }

    // Инициализация
    renderQuestion();
    startTimer();
</script>

</body>
</html>
